(function(t){function e(e){for(var s,n,a=e[0],l=e[1],d=e[2],h=0,c=[];h<a.length;h++)n=a[h],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&c.push(r[n][0]),r[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);g&&g(e);while(c.length)c.shift()();return o.push.apply(o,d||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],s=!0,a=1;a<i.length;a++){var l=i[a];0!==r[l]&&(s=!1)}s&&(o.splice(e--,1),t=n(n.s=i[0]))}return t}var s={},r={app:0},o=[];function n(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=s,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="infinite-scroll-problem/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var d=0;d<a.length;d++)e(a[d]);var g=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("adb9")},"56d7":function(t,e,i){"use strict";i.r(e);i("3019"),i("4cbf"),i("df99"),i("1c74");var s=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-screen h-screen bg-gray-700 text-white overflow-hidden",attrs:{id:"app"}},[i("div",{staticClass:"w-full h-20 flex items-center px-4 border-b border-gray-800 bg-gray-900"},[i("h1",{staticClass:"text-4xl"},[t._v("Infinite Scroll Problem")]),i("div",{staticClass:"px-5 py-1 ml-4 text-lg hover:text-opacity-100 cursor-pointer",class:"basic"===t.name?"bg-green-600 text-white":"bg-green-900 text-white text-opacity-50",on:{click:function(e){t.name="basic"}}},[t._v("Basic")]),i("div",{staticClass:"px-5 py-1 text-lg hover:text-opacity-100 cursor-pointer",class:"advanced"===t.name?"bg-green-600 text-white":"bg-green-900 text-white text-opacity-50",on:{click:function(e){t.name="advanced"}}},[t._v("Advanced")])]),i("div",{staticClass:"page w-full relative border-2 overflow-auto mt-0",attrs:{id:"scrollwrapper"}},[i(t.name,{tag:"component"})],1)])},o=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"page",staticClass:"w-full h-full"},[i("div",{staticClass:"w-full justify-center flex flex-wrap"},[t._l(t.widgets,(function(e,s){return[i("widget",{key:e.id,attrs:{height:t.widgetHeight,width:t.widgetWidth,index:s,id:e.id,src:e.src}})]}))],2),i("div",{staticClass:"w-full h-1 bg-red-500 block mt-10",attrs:{id:"observeme"}}),i("div",{staticClass:"fixed top-3 right-3 p-4 bg-gray-600"},[t._v(t._s(t.widgets.length)+" Widgets")])])},a=[],l=i("a92a"),d=(i("f12c"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.index%2===0?"bg-gray-800":"bg-gray-900",style:{height:t.height+"px"},on:{mouseover:t.mouseover,mouseleave:t.mouseleave}},[i("div",{staticClass:"h-full relative pointer-events-none",style:{width:t.width+"px"}},[i("img",{staticClass:"object-cover w-full h-full",attrs:{src:t.src}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isHovering,expression:"isHovering"}],staticClass:"absolute top-0 left-0 z-10 w-full h-full bg-black bg-opacity-75 flex items-center justify-center"},[i("p",{staticClass:"text-xl"},[t._v(t._s(t.id))])])])])}),g=[],h=(i("17af"),{props:{id:Number,index:Number,src:String,height:Number,width:Number},data:function(){return{isHovering:!1}},computed:{},methods:{mouseover:function(){this.isHovering=!0},mouseleave:function(){this.isHovering=!1}},mounted:function(){}}),c=h,w=i("62e6"),p=Object(w["a"])(c,d,g,!1,null,null,null),u=p.exports,f={components:{Widget:u},data:function(){return{widgets:[],loadingIndex:0,widgetHeight:60,widgetWidth:60,widgetsPerRow:0,rowsPerPage:0}},computed:{widgetsPerPage:function(){return this.widgetsPerRow*this.rowsPerPage}},methods:{loadWidgets:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,e=[],i=this.widgets.length;this.loadingIndex=i;for(var s=0;s<t;s++){var r=i+(s+1);e.push({id:r,src:"https://picsum.photos/200/300?random="+r})}this.widgets=this.widgets.concat(e),console.log("Num Widgets",this.widgets.length)},setObserver:function(){var t=this,e=new IntersectionObserver((function(e){var i=Object(l["a"])(e,1),s=i[0];s.isIntersecting&&(t.loadingIndex===t.widgets.length?console.log("Already loading index",t.loadingIndex):t.loadWidgets(t.widgetsPerPage))}),{root:null,threshold:.1});e.observe(document.getElementById("observeme"))},init:function(){var t=this.$refs.page.clientWidth,e=this.$refs.page.clientHeight;this.widgetsPerRow=Math.floor(t/this.widgetWidth),this.rowsPerPage=Math.ceil(e/this.widgetHeight),this.loadWidgets(this.widgetsPerPage),this.setObserver()}},mounted:function(){this.init()}},v=f,b=Object(w["a"])(v,n,a,!1,null,null,null),m=b.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"page",staticClass:"w-full h-full relative bg-red-50"},[i("div",{staticClass:"bg-red-500 bg-opacity-50",style:{height:t.totalHeight+"px"}}),i("div",{staticClass:"w-full justify-center flex flex-wrap absolute bottom-0 left-0 right-0 bg-gray-700",style:{top:t.widgetWindowTop+"px",height:t.rowsPerPage*t.widgetHeight+"px"}},[t._l(t.widgetsVisible,(function(e,s){return[i("widget",{key:e.id,attrs:{height:t.widgetHeight,width:t.widgetWidth,index:s,id:e.id,src:e.src}})]}))],2),i("div",{staticClass:"fixed top-3 right-3 py-1 text-xs bg-gray-600"},[i("div",{staticClass:"flex"},[i("div",{staticClass:"w-64 px-2 border-r border-gray-500"},[i("p",{staticClass:"font-semibold font-sans"},[t._v("Window: "+t._s(t.viewportTop.toFixed(0))+"px - "+t._s(t.viewportBottom.toFixed(0))+"px")]),i("p",{staticClass:"text-sm"},[t._v("Showing Widgets "+t._s(t.startIndex)+" to "+t._s(t.startIndex+t.widgetsPerPage))])]),i("div",{staticClass:"w-64 px-2 border-r border-gray-500"},[i("p",[t._v(t._s(t.widgetsPerRow)+" per row")]),i("p",[t._v(t._s(t.rowsPerPage)+" rows per page | "+t._s(Math.ceil(t.widgetsVisible.length/t.widgetsPerRow))+" Visible")]),i("p",[t._v(t._s(t.widgetsPerPage)+" per page | "+t._s(t.widgetsVisible.length)+" Visible")])]),i("div",{staticClass:"w-64 px-2"},[i("p",{staticClass:"text-lg"},[t._v(t._s(t.widgets.length)+" Widgets")]),i("p",[t._v(t._s(t.widgetHeight)+"x"+t._s(t.widgetWidth)+" pixels")])])])])])},P=[],y=(i("4a7d"),{components:{Widget:u},data:function(){return{startRow:0,startIndex:0,totalRows:0,totalHeight:0,viewportHeight:0,viewportWidth:0,widgetHeight:60,widgetWidth:60,widgetsPerRow:0,rowsPerPage:0,widgets:[],scrollwrapper:null,viewportTop:0,viewportBottom:0,widgetWindowTop:0}},computed:{widgetsVisible:function(){return this.widgets.slice(this.startIndex,this.startIndex+this.widgetsPerPage)},widgetsPerPage:function(){return this.widgetsPerRow*this.rowsPerPage},widgetViewportHeight:function(){return this.rowsPerPage*this.widgetHeight},widgetWindowBottom:function(){return this.widgetWindowTop+this.widgetViewportHeight}},methods:{loadWidgets:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,e=[],i=this.widgets.length,s=0;s<t;s++){var r=i+(s+1);e.push({id:r,src:"https://picsum.photos/200/300?random="+r})}this.widgets=this.widgets.concat(e),console.log("Num Widgets",this.widgets.length)},init:function(){this.widgets.length||this.loadWidgets(),this.viewportWidth=this.$refs.page.clientWidth,this.viewportHeight=this.$refs.page.clientHeight,this.widgetsPerRow=Math.floor(this.viewportWidth/this.widgetWidth),this.rowsPerPage=Math.ceil(this.viewportHeight/this.widgetHeight)+2,this.totalRows=Math.ceil(this.widgets.length/this.widgetsPerRow),this.totalHeight=this.totalRows*this.widgetHeight,this.$nextTick(this.setWidgetsVisible)},setWidgetsVisible:function(){var t=Math.floor(this.viewportTop/this.widgetHeight);this.startRow=Math.max(0,t-1);var e=this.startRow*this.widgetsPerRow,i=e+this.widgetsPerPage;i>this.widgets.length&&this.startRow--,this.startIndex=e},scroll:function(){var t=this.scrollwrapper.scrollTop,e=this.scrollwrapper.clientHeight;this.viewportTop=t,this.viewportBottom=t+e;var i=this.widgetWindowBottom-this.viewportBottom,s=this.viewportTop-this.widgetWindowTop;i<this.widgetHeight?(this.widgetWindowTop=Math.min(this.totalHeight-this.widgetViewportHeight,Math.max(0,this.viewportTop-this.widgetHeight)),this.setWidgetsVisible()):s<this.widgetHeight&&(this.widgetWindowTop=Math.max(0,this.viewportTop-this.widgetHeight),this.setWidgetsVisible())},resize:function(){console.log("Window resized"),this.init()}},mounted:function(){this.scrollwrapper=document.getElementById("scrollwrapper"),this.scrollwrapper.addEventListener("scroll",this.scroll),window.addEventListener("resize",this.resize),this.init()},beforeDestroy:function(){this.scrollwrapper&&this.scrollwrapper.removeEventListener("scroll",this.scroll),window.removeEventListener("resize",this.resize)}}),_=y,W=(i("e3e4"),Object(w["a"])(_,x,P,!1,null,null,null)),H=W.exports,C={name:"App",components:{Basic:m,Advanced:H},data:function(){return{name:"basic"}}},O=C,j=(i("034f"),Object(w["a"])(O,r,o,!1,null,null,null)),T=j.exports;i("c898");s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(T)}}).$mount("#app")},adb9:function(t,e,i){},c898:function(t,e,i){},d370:function(t,e,i){},e3e4:function(t,e,i){"use strict";i("d370")}});
//# sourceMappingURL=app.dd3217e8.js.map